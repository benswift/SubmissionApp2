.row
  #content.col-md-9
    %h1#assignment-name.page-header{"assignment-id" => @assignment.id}
      = @assignment.name
      .menu-icon-container.hidden
        %span.glyphicon.glyphicon-tasks.menu-icon
    %p.bold Submission Instructions
    %p.italic
      Assignment for #{link_to @course.code + ": " + @course.name, course_path(@course.id)}
    %p
    .alert.alert-warning{:style => "font-weight: 600"}
      %span.glyphicon.glyphicon-time>
      Due at #{@assignment.due_date.strftime('%d/%m/%Y %I:%M%p')}
    %p= @assignment.description
    - if !@assignment.submissions.empty?
      %h3 Submissions by hour
      %canvas#chart{width: "800", height: "400"}
    
    %h3 Your submissions
    %table.table.table-hover.table-striped
      - if @submissions.empty?
        %p
        .alert.alert-danger{:style => "font-weight: 600"}
          %span.glyphicon.glyphicon-warning-sign
          %span You currently have no submissions for this assignment.
        %a{:href => "/submissions/#{@assignment.id.to_s}/new"} New submission
      - else
        %tr
          %th Submitted by
          %th Uni ID
          %th Date submitted
          %th
        - @submissions.each do |s|
          %tr
            %td= link_to s.user.full_name, user_path(s.user)
            %td= link_to s.user.uid, user_path(s.user)
            %td
              %span.glyphicon.glyphicon-ok.good
              = link_to s.created_at.strftime('%d/%m/%Y %I:%M%p'), submission_path(s), class: "good"
              - if s.created_at > @assignment.due_date
                %span.label.label-danger
                  Late
            %td= link_to "View Submission", submission_path(s), class: "btn btn-sm btn-primary"
    - if current_user.is_staff?
      %h3 All submissions
      %table.table.table-hover.table-striped
        - if @assignment.submissions.empty?
          %p No submissions found.
        - else
          %tr
            %th Submitted by
            %th Uni ID
            %th Date submitted
            %th
          - @submissions.each do |s|
            %tr
              %td= link_to s.user.full_name, user_path(s.user)
              %td= link_to s.user.uid, user_path(s.user)
              %td
                = s.created_at.strftime('%d/%m/%Y %I:%M%p')
                - if s.created_at > @assignment.due_date
                  %span.label.label-danger
                    Late
              %td= link_to "View Submission", submission_path(s)
  = render 'sidebar_show'